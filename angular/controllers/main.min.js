var app=angular.module("myPortfolio");app.controller("main",function($http,$scope){$scope.cookieMsgVisible=function(){return"undefined"==typeof Storage?null!==$scope.getCookie("cookieMsg")?!1:!0:null!==localStorage.getItem("cookieMsg")?!1:!0},$scope.addCookie=function(cookieName,cookieValue){document.cookie=cookieName+"="+cookieValue},$scope.getCookie=function(cookieName){for(var cookies=document.cookie.split(";"),i=0;i<cookies.length;i++){var aux=cookies[i].trim().split("=");if(aux[0]===cookieName)return aux[1]}return null},$scope.removeCookieMsg=function(){"undefined"!=typeof Storage?localStorage.setItem("cookieMsg","hide"):$scope.addCookie("cookieMsg","hide")},$scope.getLanguage=function(){var storedLanguage=$scope.getStoredLang();if(null===storedLanguage){var browserLang=(navigator.language||navigator.userLanguage).split("-")[0];return"es"===browserLang?"spa":"eng"}return storedLanguage},$scope.getLabels=function(){$scope.nLoads++,$http.get("/db/labels/"+$scope.language).success(function(labelsArray){$scope.nLoads--;for(var labelsHash=Object,i=0;i<labelsArray.length;i++)labelsHash[labelsArray[i].tag]=labelsArray[i].text;$scope.labels=labelsHash}).error(function(error){$scope.nLoads--,alert("Translations could not be retrieved:"+error)})},$scope.isLangSelected=function(lang){return lang===$scope.language},$scope.storeLanguage=function(){"undefined"!=typeof Storage?localStorage.setItem("lang",$scope.language):$scope.addCookie("lang",$scope.language)},$scope.getStoredLang=function(){return"undefined"!=typeof Storage?localStorage.getItem("lang"):$scope.getCookie("lang")},$scope.setLang=function(lang){$scope.language=lang,$scope.storeLanguage(),$scope.getLabels(),$scope.isSelected("experience")?$scope.$broadcast("reloadExperience"):$scope.isSelected("skills")&&$scope.$broadcast("reloadSkills")},$scope.isSelected=function(tab){return $scope.tab===tab?!0:!1},$scope.isLoading=function(){return $scope.nLoads>0?!0:!1},$(document).on("click",function(){$(".navbar-collapse.in").collapse("hide")}),$scope.nLoads=0,$scope.language=$scope.getLanguage(),$scope.getLabels()});